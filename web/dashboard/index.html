<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Security Framework</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        .glass {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        .glow {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen text-white">
    <div class="container mx-auto p-6">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent">
                üéØ UNIFIED SECURITY FRAMEWORK
            </h1>
            <p class="text-xl text-gray-300 mt-4">AI-Powered Red Team Operations Platform</p>
            <div class="flex justify-center space-x-4 mt-4">
                <span class="px-3 py-1 bg-green-600 rounded text-sm">‚úÖ AI Monitor</span>
                <span class="px-3 py-1 bg-blue-600 rounded text-sm">üîó 6 Frameworks</span>
                <span class="px-3 py-1 bg-purple-600 rounded text-sm">‚ö° Real-time</span>
            </div>
        </header>

        <!-- Framework Status -->
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8">
            <div class="glass rounded-lg p-4 hover:glow transition-all duration-300">
                <h3 class="text-lg font-semibold mb-2">üéØ C2 Framework</h3>
                <div id="c2-status" class="text-sm text-green-400">Ready</div>
                <button onclick="launchComponent('c2')" class="mt-2 bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs">Launch</button>
            </div>

            <div class="glass rounded-lg p-4 hover:glow transition-all duration-300">
                <h3 class="text-lg font-semibold mb-2">üé£ Phishing</h3>
                <div id="phishing-status" class="text-sm text-green-400">Ready</div>
                <button onclick="launchComponent('phishing')" class="mt-2 bg-orange-600 hover:bg-orange-700 px-3 py-1 rounded text-xs">Launch</button>
            </div>

            <div class="glass rounded-lg p-4 hover:glow transition-all duration-300">
                <h3 class="text-lg font-semibold mb-2">üë• Social Eng</h3>
                <div id="social-status" class="text-sm text-green-400">Ready</div>
                <button onclick="launchComponent('social')" class="mt-2 bg-yellow-600 hover:bg-yellow-700 px-3 py-1 rounded text-xs">Launch</button>
            </div>

            <div class="glass rounded-lg p-4 hover:glow transition-all duration-300">
                <h3 class="text-lg font-semibold mb-2">üîç OSINT</h3>
                <div id="osint-status" class="text-sm text-green-400">Ready</div>
                <button onclick="executeOperation('osint', 'reconnaissance')" class="mt-2 bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs">Execute</button>
            </div>

            <div class="glass rounded-lg p-4 hover:glow transition-all duration-300">
                <h3 class="text-lg font-semibold mb-2">üñºÔ∏è Steganography</h3>
                <div id="steganography-status" class="text-sm text-green-400">Ready</div>
                <button onclick="executeOperation('steganography', 'embed_payload')" class="mt-2 bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded text-xs">Execute</button>
            </div>

            <div class="glass rounded-lg p-4 hover:glow transition-all duration-300">
                <h3 class="text-lg font-semibold mb-2">ü§ñ AI Monitor</h3>
                <div id="ai-status" class="text-sm text-green-400">Active</div>
                <button onclick="generateReport()" class="mt-2 bg-cyan-600 hover:bg-cyan-700 px-3 py-1 rounded text-xs">Report</button>
            </div>
        </div>

        <!-- Real-time Activity Feed -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <div class="glass rounded-lg p-6">
                <h3 class="text-xl font-semibold mb-4">üìä Real-time Activity Feed</h3>
                <div id="activity-feed" class="h-80 overflow-y-auto space-y-2 text-sm">
                    <div class="text-gray-400">Monitoring framework activity...</div>
                </div>
            </div>

            <div class="glass rounded-lg p-6">
                <h3 class="text-xl font-semibold mb-4">üß† AI Analysis & Suggestions</h3>
                <div id="ai-analysis" class="h-80 overflow-y-auto space-y-2 text-sm">
                    <div class="text-gray-400">AI analysis will appear here...</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="glass rounded-lg p-6">
            <h3 class="text-xl font-semibold mb-4">‚ö° Quick Actions</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3">
                <button onclick="executeOperation('c2', 'deploy_agent')" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors">Deploy Agent</button>
                <button onclick="executeOperation('phishing', 'create_campaign')" class="bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded transition-colors">Phish Campaign</button>
                <button onclick="executeOperation('social', 'recon_target')" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded transition-colors">Target Recon</button>
                <button onclick="executeOperation('osint', 'gather_intel')" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">Gather Intel</button>
                <button onclick="executeOperation('steganography', 'hide_payload')" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition-colors">Hide Payload</button>
                <button onclick="generateSuggestions()" class="bg-cyan-600 hover:bg-cyan-700 px-4 py-2 rounded transition-colors">AI Suggest</button>
                <button onclick="createTunnel()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors">Create Tunnel</button>
                <button onclick="viewLogs()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded transition-colors">View Logs</button>
            </div>
        </div>
    </div>

    <script>
        // WebSocket connection
        const socket = io();
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            loadFrameworkStatus();
            setupWebSocket();
            startActivityPolling();
        });

        async function loadFrameworkStatus() {
            try {
                const response = await fetch('/health');
                const data = await response.json();
                
                // Update status indicators
                Object.keys(data.modules).forEach(module => {
                    const statusEl = document.getElementById(`${module}-status`);
                    if (statusEl) {
                        statusEl.textContent = data.modules[module] ? 'Active' : 'Inactive';
                        statusEl.className = data.modules[module] ? 'text-sm text-green-400' : 'text-sm text-red-400';
                    }
                });
                
                addActivityLog('system', 'Framework status updated', { modules: data.modules });
            } catch (error) {
                console.error('Failed to load framework status:', error);
            }
        }

        function setupWebSocket() {
            socket.on('ai-activity', function(data) {
                addActivityLog(data.module, data.action, data.data);
            });

            socket.on('connect', function() {
                addActivityLog('system', 'Connected to framework', { socketId: socket.id });
                socket.emit('subscribe-monitoring');
            });

            socket.on('disconnect', function() {
                addActivityLog('system', 'Disconnected from framework', {});
            });
        }

        function addActivityLog(module, action, data) {
            const feed = document.getElementById('activity-feed');
            const timestamp = new Date().toLocaleTimeString();
            
            const logEntry = document.createElement('div');
            logEntry.className = 'p-2 bg-slate-800 rounded border-l-4 border-blue-500';
            logEntry.innerHTML = `
                <div class="flex justify-between items-center">
                    <span class="font-semibold text-blue-400">[${module.toUpperCase()}]</span>
                    <span class="text-xs text-gray-400">${timestamp}</span>
                </div>
                <div class="text-gray-300">${action}</div>
                <div class="text-xs text-gray-500 mt-1">${JSON.stringify(data).substring(0, 100)}...</div>
            `;
            
            feed.insertBefore(logEntry, feed.firstChild);
            
            // Keep only last 50 entries
            while (feed.children.length > 50) {
                feed.removeChild(feed.lastChild);
            }
        }

        async function executeOperation(module, operation) {
            try {
                const response = await fetch(`/api/${module}/execute`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ operation, parameters: {} })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    addActivityLog(module, `Operation: ${operation}`, result.result);
                } else {
                    addActivityLog(module, `Operation failed: ${operation}`, { error: result.error });
                }
            } catch (error) {
                addActivityLog(module, `Operation error: ${operation}`, { error: error.message });
            }
        }

        async function generateSuggestions() {
            try {
                const response = await fetch('/api/ai/suggest', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ context: 'current_operations' })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    addAIAnalysis('AI Suggestions', result.suggestions);
                    addActivityLog('ai', 'Generated tactical suggestions', { count: 5 });
                }
            } catch (error) {
                console.error('Failed to generate suggestions:', error);
            }
        }

        async function generateReport() {
            try {
                addActivityLog('ai', 'Generating comprehensive report...', {});
                
                const response = await fetch('/api/ai/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ reportType: 'comprehensive', timeframe: '1h' })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    addAIAnalysis('Automated Report', result.analysis);
                    addActivityLog('ai', 'Report generation completed', { type: 'comprehensive' });
                }
            } catch (error) {
                console.error('Failed to generate report:', error);
            }
        }

        async function createTunnel() {
            try {
                const port = prompt('Enter port number (default: 8080):', '8080');
                if (!port) return;
                
                const response = await fetch('/api/tunnels/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ port: parseInt(port) })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    addActivityLog('tunnel', 'Tunnel created', result.tunnel);
                }
            } catch (error) {
                console.error('Failed to create tunnel:', error);
            }
        }

        function launchComponent(component) {
            addActivityLog('system', `Launching ${component} component...`, { component });
            // In a real implementation, this would trigger the actual component launch
            setTimeout(() => {
                addActivityLog(component, 'Component launched successfully', { status: 'active' });
            }, 2000);
        }

        function addAIAnalysis(title, content) {
            const analysisDiv = document.getElementById('ai-analysis');
            const timestamp = new Date().toLocaleTimeString();
            
            const analysisEntry = document.createElement('div');
            analysisEntry.className = 'p-3 bg-slate-800 rounded border-l-4 border-cyan-500';
            analysisEntry.innerHTML = `
                <div class="flex justify-between items-center mb-2">
                    <span class="font-semibold text-cyan-400">${title}</span>
                    <span class="text-xs text-gray-400">${timestamp}</span>
                </div>
                <div class="text-gray-300 text-sm">${typeof content === 'object' ? JSON.stringify(content, null, 2) : content}</div>
            `;
            
            analysisDiv.insertBefore(analysisEntry, analysisDiv.firstChild);
            
            // Keep only last 20 entries
            while (analysisDiv.children.length > 20) {
                analysisDiv.removeChild(analysisDiv.lastChild);
            }
        }

        function viewLogs() {
            window.open('/logs', '_blank');
        }

        function startActivityPolling() {
            // Simulate some activity for demonstration
            setInterval(() => {
                const modules = ['c2', 'phishing', 'social', 'osint', 'steganography'];
                const actions = ['heartbeat', 'status_check', 'routine_scan', 'update_check'];
                
                const randomModule = modules[Math.floor(Math.random() * modules.length)];
                const randomAction = actions[Math.floor(Math.random() * actions.length)];
                
                // Don't spam with too much activity
                if (Math.random() > 0.7) {
                    addActivityLog(randomModule, randomAction, { automated: true });
                }
            }, 10000); // Every 10 seconds
        }

        // Auto-refresh status every 30 seconds
        setInterval(loadFrameworkStatus, 30000);
    </script>
</body>
</html>
